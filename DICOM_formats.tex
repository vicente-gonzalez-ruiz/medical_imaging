\chapter{\glsentryshort{DICOM} file formats}

\section{What is DICOM?}
\begin{itemize}
\item \popup{Open}{Openly accessible and usable by anyone.}
  \popup{standard}{Actually is a set of standards.} created in 1992 by
  the \gls{ACR} and the \gls{NEMA} \cite{DICOM2025,wikipedia_DICOM}.
\item It defines how to transfer (transport layers protocols:
  \gls{TCP} or \gls{UDP}), storage (filenames, structure of the
  filesystem, etc.), processing, display (such as \gls{GSDF}),
  perception, and use of information in medicine
  \cite{bushberg2011essential}, allowing devices and systems from
  different manufacturers to communicate and share medical image data
  seamlessly.
\end{itemize}.

\section{What is DICOM file?}
\begin{itemize}
\item \gls{DICOM} is a media container for medical signals
  (\gls{ECG} signals, \gls{PCG} audios, 2D images, 3D images, and videos).
\item A DICOM file, such as a single CT slice, consists of two
  distinct parts:
  \begin{enumerate}
  \item The \textbf{header} is a block of data that contains specific
    \popup{information}{Such as name, age, gender, date of birth, and
      technical data about the image (device used, resolution, codec,
      etc.).}  that complements the image
    (\popup{attributes}{Depending on the image and the circumstances,
      certain information is mandatory, while other attributes are
      optional.}), classified as
    \href{https://dicom.nema.org/medical/dicom/current/output/html/part06.html#PS3.6}{DICOM
      tags}.
  \item The \popup{\textbf{image} itself}{The signal in
      general.}. Notice that the metadata provided by \gls{DICOM} are
    different from the image's metadata.
  \end{enumerate}
\end{itemize}.

\section{Supported 1D-signals codecs}
\begin{itemize}
\item \gls{ECG} and \gls{PCG} signals are \popup{\gls{PCM}
    encoded}{Without any loss or data compression.} with up to 24
  bits/sample.
\end{itemize}

\section{Supported image codecs}
\begin{enumerate}
\item Lossless:
  \begin{enumerate}
  \item \popup{Raw}{As generated by the ADC (Analog Digital
      Converted.}
    \href{https://en.wikipedia.org/wiki/Endianness}{Little Endian}
    with up to 64 bits/grayscale-pixel
    (\href{https://en.wikipedia.org/wiki/Double-precision_floating-point_format}{double-precision
      floating-point format}).
  \item \gls{RLE}.
  \item \href{https://en.wikipedia.org/wiki/Lossless_JPEG}{JPEG Lossless}.
  \item \href{https://en.wikipedia.org/wiki/Lossless_JPEG\#JPEG_LS}{JPEG-LS}.
  \item \href{https://en.wikipedia.org/wiki/JPEG_2000}{JPEG 2000}
    (reversible path).
  \item \href{https://en.wikipedia.org/wiki/JPEG_XL}{JPEG XL}
    (reversible path).
  \item \href{https://en.wikipedia.org/wiki/Deflate}{Deflate}. Similar
    to \gls{PNG}.
  \end{enumerate}
\item Lossy:
  \begin{enumerate}
  \item \gls{JPEG}.
  \item \href{https://en.wikipedia.org/wiki/JPEG_2000}{JPEG 2000}
    (ireversible path).
  \item \href{https://en.wikipedia.org/wiki/JPEG_XL}{JPEG XL}
    (ireversible path).
  \end{enumerate}
\end{enumerate}

\section{Supported video codecs}
\begin{enumerate}
\item \gls{JPIP} (see Chapter~\ref{cha:JPEG2000}).
\item \gls{MPEG}-2 (see Chapter~\ref{cha:MPEG}).
\item \gls{HEVC} (see Chapter~\ref{cha:HEVC}).
\end{enumerate}

\section{Storage (example)}
\begin{verbatim}
[USB Drive Root]          <- We are using an USB drive
+-- DICOMDIR              <- Binary File
+-- DICOM                 <- Folder
    +-- STUDY01           <- Folder
    |   +-- SERIES01      <- Folder
    |   |   +-- IMAG0001  <- Binary file
    |   |   +-- IMAG0002  <- Binary file
    |   |   +-- IMAG0003  <- Binary file
    |   |-- SERIES02      <- Folder
    |   |   |-- IMAG0004  :
    |   |   |-- IMAG0005
    +-- STUDY02
        +-- SERIES01
            +-- IMAG0006
            +-- IMAG0007
            +-- IMAG0008
\end{verbatim}

Where the file \texttt{DICOMDIR} defines the content of the rest of the file system:
\begin{verbatim}
(0004,1130) DICOMDIR FILE
    (0004,1200) Patient Record: John Doe
        (0004,1200) Study Record: CT Brain 2025-09-02
            (0004,1200) Series Record: CT Scout
                (0004,1500) Image File Record: DICOM/STUDY01/SERIES01/IMAG0001
            (0004,1200) Series Record: CT Axial
                (0004,1500) Image File Record: DICOM/STUDY01/SERIES02/IMAG0002
                (0004,1500) Image File Record: DICOM/STUDY01/SERIES02/IMAG0003
            :
\end{verbatim}
