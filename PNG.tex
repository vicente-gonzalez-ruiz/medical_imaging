\chapter{\glsentrylong{PNG} (\glsentryshort{PNG})}

\section{\glsentryshort{W3C} international standard}
\begin{itemize}
\item Developed by the \href{https://www.w3.org/}{W3C}, \gls{PNG}
  \cite{roelofs1999png} is supported by all Web browsers, and most
  image viewers \cite{wikipedia_PNG}.
\end{itemize}
\begin{figure}[H]
  \vspace{-2ex}
  \centering
  \href{https://upload.wikimedia.org/wikipedia/commons/0/05/CT_of_a_normal_abdomen_and_pelvis%2C_coronal_plane_79.png}{\includegraphics[width=6cm]{CT_example}}\\
  \caption{A \gls{PNG} image (click on it).}
  \label{fig:PNG_example}
\end{figure}

\section{Raster graphics file format}
\begin{itemize}
\item Up to ($2^{32}-1$)x($2^{32}-1$) pixels, efficiently represented
  (lossless compression with DEFLATE \cite{deutsch1996deflate}).
\item Pixels can be gray-scale (1 channel) or color
  \popup{\gls{RGBA}}{Red, Green, Blue, and Alpha (transparency)
    channels. The alpha-channel is optional.} (4 channels).
\end{itemize}
\begin{figure}[H]
  \vspace{-3ex}
  \centering
  \href{https://en.wikipedia.org/wiki/Raster_graphics}{\includegraphics[width=4cm]{RGB-raster-image}}
  \caption{\gls{PNG} only represents raster images.}
  \label{fig:PNG_raster}
\end{figure}

\section{8 and 16 bits/channel}
\begin{itemize}
\item In gray-scale image (see Table~\ref{tab:gray_levels}):
  \begin{table}[!h]
    \vspace{2ex}
    \begin{center}
      \begin{tabular}{c|c}
        & Number of \\
        Bits/channel & gray-scale values \\
        \hline
        8 & $2^8=256$ \\
        16 & $2^{16}=65536$
      \end{tabular}
    \vspace{2ex}
    \end{center}
    \caption{Number of gray levels VS the number of bits/pixel.}
    \label{tab:gray_levels}
  \end{table}
  \newpage
\item These pixel ``depth'' should be high enough to avoid visual artifacts.
\end{itemize}
\begin{figure}[H]
  \vspace{-2ex}
  \centering
    \href{https://www.fastcompression.com/blog/jpeg2000-applications-part1.htm}{\includegraphics[width=0.8\textwidth]{8bit_vs_12bit}}
  \caption{\gls{PNG} is able to use up to $2^{24}$ colors.}
  \label{fig:PNG_colors}
\end{figure}

\section{Progressive rendering}
\begin{itemize}
\item Optional. Pixels are displayed using the Adam7 algorithm.
\end{itemize}
\begin{figure}[H]
  \vspace{-2ex}
  \centering
  \href{https://upload.wikimedia.org/wikipedia/commons/2/27/Adam7_passes.gif}{\includegraphics[width=5cm]{Adam7_passes-0}}
  \caption{Progressive displaying in \gls{PNG} (click in the image).}
  \label{fig:PNG_progressive}
\end{figure}
  
\section{\popup{Animated}{Also called ``motion''.} PNG}
\begin{itemize}
\item A \gls{APNG} is sequence of images in a \gls{PNG} file
  \cite{wikipedia_APNG}.
\end{itemize}
\begin{figure}[H]
  \vspace{-2ex}
  \centering
  \href{https://commons.wikimedia.org/wiki/Category:Animated_PNG_files#/media/File:201805_human_skeleton_anim.png}{\includegraphics[width=5cm]{human_skeleton_anim}}
  \caption{An animated \gls{PNG} (click in the image).}
  \label{fig:PNG_animated}
\end{figure}

\section{Image metadata}
\begin{itemize}
\item \gls{PNG} images can store metadata:
  \begin{table}[!h]
    \vspace{2ex}
    \begin{center}
      \begin{tabular}{l|l}
        Keyword & Meaning\\
        \hline
        Title & Short (one line) title or caption for image \\
        Author & Name of image's creator \\
        Description & Description of image (possibly long) \\
        Copyright & Copyright notice \\
        Creation Time & Time of original image creation \\
        Software & Software used to create the image \\
        Disclaimer & Legal disclaimer \\
        Warning & Warning of nature of content \\
        Source & Device used to create the image \\
        Comment & Miscellaneous comment; conversion from GIF comment
      \end{tabular}
    \end{center}
    \caption{Metadata in PNG.}
    \label{tab:meta_PNG}
  \end{table}
\end{itemize}

\begin{itemize}
\item
  \href{https://github.com/vicente-gonzalez-ruiz/medical_imaging/blob/main/notebooks/PNG_add_metadata.ipynb}{Here}
  there is an example that shows and modifies the metadata in a PNG
  image.
\end{itemize}
